{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery-item', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst form = document.getElementById('search-form');\nconst gallery = document.getElementById('gallery');\nconst spinner = document.getElementById('loading-spinner');\nconst loadMoreBtn = document.getElementById('load-more');\n\nlet page = 1; // Sayfa numarası\nconst perPage = 40; // Sayfa başına görüntü sayısı\nlet totalHits = 0; // Toplam görüntü sayısı\nlet query = ''; // Arama terimi\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    form.addEventListener('submit', async (event) => {\n        event.preventDefault();\n        \n        query = document.getElementById('search-input').value.trim();\n        \n        if (!query) {\n            iziToast.warning({\n                title: 'Uyarı',\n                message: 'Lütfen bir arama terimi girin!',\n            });\n            return;\n        }\n        \n        page = 1; // Yeni arama için sayfayı sıfırla\n        loadMoreBtn.style.display = 'none'; // \"Load more\" butonunu gizle\n        \n        try {\n            // Spinner'ı göster\n            spinner.style.display = 'block';\n\n            const response = await axios.get(`https://pixabay.com/api/?key=46164011-db8308970fd829f53e85acb75&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`);\n            const data = response.data;\n              \n            totalHits = data.totalHits; // Toplam görüntü sayısını ayarla\n\n            if (data.hits.length === 0) {\n                iziToast.error({\n                    title: 'Hata',\n                    message: 'Görsel bulunamadı. Lütfen tekrar deneyin!',\n                });\n                return;\n            }\n\n            // Eski sonuçları temizle\n            gallery.innerHTML = '';\n              \n            // Yeni görselleri ekle ve her görsel için bilgileri göster\n            appendImages(data.hits);\n\n            if (data.hits.length >= perPage && gallery.children.length < totalHits) {\n                loadMoreBtn.style.display = 'block';\n            }\n            // SimpleLightbox'u güncelle\n            lightbox.refresh();\n\n        } catch (error) {\n            // Hata durumunda spinner'ı kapat\n            spinner.style.display = 'none';\n\n            iziToast.error({\n                title: 'Hata',\n                message: 'Bir sorun oluştu. Lütfen tekrar deneyin!',\n            });\n            console.error('Bir hata oluştu:', error);\n        } finally {\n            // Spinner'ı kapat\n            spinner.style.display = 'none';\n        }\n    });\n\n    loadMoreBtn.addEventListener('click', async () => {\n        page += 1; // Sayfayı bir artır\n        try {\n            const response = await axios.get(`https://pixabay.com/api/?key=46164011-db8308970fd829f53e85acb75&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`);\n            const data = response.data;\n\n            appendImages(data.hits);\n\n            // Eğer toplam görüntü sayısı aşılmışsa \"Load more\" butonunu gizle\n            if (gallery.children.length >= totalHits) {\n                loadMoreBtn.style.display = 'none';\n                iziToast.info({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                });\n            }\n\n            // SimpleLightbox'u güncelle\n            lightbox.refresh();\n            \n        } catch (error) {\n            iziToast.error({\n                title: 'Hata',\n                message: 'Bir sorun oluştu. Lütfen tekrar deneyin!',\n            });\n            console.error('Bir hata oluştu:', error);\n        }\n    });\n});\n\n// Yeni görselleri ekle ve her görsel için bilgileri göster\nfunction appendImages(images) {\n    images.forEach(image => {\n        const imgElement = document.createElement('a');\n        imgElement.href = image.largeImageURL;\n        imgElement.classList.add('gallery-item');\n        imgElement.innerHTML = `\n          <li id=\"gallery-items\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n          </li>\n          <div class=\"gallery-items-info\">\n            <p class=\"gallery-items-info-alt\"><strong>Likes:</strong> ${image.likes}</p>\n            <p class=\"gallery-items-info-alt\"><strong>Comments:</strong> ${image.comments}</p>\n            <p class=\"gallery-items-info-alt\"><strong>Views:</strong> ${image.views}</p>\n            <p class=\"gallery-items-info-alt\"><strong>Downloads:</strong> ${image.downloads}</p>\n          </div>\n        `;\n        gallery.appendChild(imgElement);\n    });\n}\n"],"names":["lightbox","SimpleLightbox","form","gallery","spinner","loadMoreBtn","page","perPage","totalHits","query","event","iziToast","data","axios","appendImages","error","images","image","imgElement"],"mappings":"owBAMA,MAAMA,EAAW,IAAIC,EAAe,gBAAiB,CACnD,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAU,SAAS,eAAe,iBAAiB,EACnDC,EAAc,SAAS,eAAe,WAAW,EAEvD,IAAIC,EAAO,EACX,MAAMC,EAAU,GAChB,IAAIC,EAAY,EACZC,EAAQ,GAEZ,SAAS,iBAAiB,mBAAoB,IAAM,CAChDP,EAAK,iBAAiB,SAAU,MAAOQ,GAAU,CAK7C,GAJAA,EAAM,eAAc,EAEpBD,EAAQ,SAAS,eAAe,cAAc,EAAE,MAAM,OAElD,CAACA,EAAO,CACRE,EAAS,QAAQ,CACb,MAAO,QACP,QAAS,gCACzB,CAAa,EACD,MACH,CAEDL,EAAO,EACPD,EAAY,MAAM,QAAU,OAE5B,GAAI,CAEAD,EAAQ,MAAM,QAAU,QAGxB,MAAMQ,GADW,MAAMC,EAAM,IAAI,qEAAqEJ,CAAK,iEAAiEH,CAAI,aAAaC,CAAO,EAAE,GAChL,KAItB,GAFAC,EAAYI,EAAK,UAEbA,EAAK,KAAK,SAAW,EAAG,CACxBD,EAAS,MAAM,CACX,MAAO,OACP,QAAS,2CAC7B,CAAiB,EACD,MACH,CAGDR,EAAQ,UAAY,GAGpBW,EAAaF,EAAK,IAAI,EAElBA,EAAK,KAAK,QAAUL,GAAWJ,EAAQ,SAAS,OAASK,IACzDH,EAAY,MAAM,QAAU,SAGhCL,EAAS,QAAO,CAEnB,OAAQe,EAAO,CAEZX,EAAQ,MAAM,QAAU,OAExBO,EAAS,MAAM,CACX,MAAO,OACP,QAAS,0CACzB,CAAa,EACD,QAAQ,MAAM,mBAAoBI,CAAK,CACnD,QAAkB,CAENX,EAAQ,MAAM,QAAU,MAC3B,CACT,CAAK,EAEDC,EAAY,iBAAiB,QAAS,SAAY,CAC9CC,GAAQ,EACR,GAAI,CAEA,MAAMM,GADW,MAAMC,EAAM,IAAI,qEAAqEJ,CAAK,iEAAiEH,CAAI,aAAaC,CAAO,EAAE,GAChL,KAEtBO,EAAaF,EAAK,IAAI,EAGlBT,EAAQ,SAAS,QAAUK,IAC3BH,EAAY,MAAM,QAAU,OAC5BM,EAAS,KAAK,CACV,QAAS,4DAC7B,CAAiB,GAILX,EAAS,QAAO,CAEnB,OAAQe,EAAO,CACZJ,EAAS,MAAM,CACX,MAAO,OACP,QAAS,0CACzB,CAAa,EACD,QAAQ,MAAM,mBAAoBI,CAAK,CAC1C,CACT,CAAK,CACL,CAAC,EAGD,SAASD,EAAaE,EAAQ,CAC1BA,EAAO,QAAQC,GAAS,CACpB,MAAMC,EAAa,SAAS,cAAc,GAAG,EAC7CA,EAAW,KAAOD,EAAM,cACxBC,EAAW,UAAU,IAAI,cAAc,EACvCA,EAAW,UAAY;AAAA;AAAA,wBAEPD,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,wEAGUA,EAAM,KAAK;AAAA,2EACRA,EAAM,QAAQ;AAAA,wEACjBA,EAAM,KAAK;AAAA,4EACPA,EAAM,SAAS;AAAA;AAAA,UAGnFd,EAAQ,YAAYe,CAAU,CACtC,CAAK,CACL"}